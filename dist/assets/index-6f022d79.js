(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const r of d.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(l){if(l.ep)return;l.ep=!0;const d=n(l);fetch(l.href,d)}})();const v=document.querySelector("#form"),E=document.querySelector("#word1Input"),$=document.querySelector("#word2Input"),h=document.querySelector("#list"),_=document.querySelector("#word-count"),O=document.querySelector("#search-input");document.querySelector("#loader");const z=document.querySelector(".deleted-word-count"),D=document.querySelector(".check-all"),I=document.querySelector(".remove-all-marks"),R=document.querySelector(".delete-all-tasks"),J=document.querySelector(".delete-checked-tasks");document.querySelector(".restore-all-deleted-tasks");const K=document.querySelector("#category-select"),G=document.querySelector("#part-select"),Q=document.querySelector("#level-select"),X=document.querySelector("#type-select"),Y=document.querySelector("#category-find"),Z=document.querySelector("#part-find"),ee=document.querySelector("#level-find"),te=document.querySelector("#type-find"),oe=document.querySelector("#action-find"),C=document.querySelector("#numberOfPage"),V=document.querySelector(".pageControl"),ne=document.querySelector(".word-inputs"),se=document.querySelector(".add-example");let s=JSON.parse(localStorage.getItem("words"))??[],g=JSON.parse(localStorage.getItem("checkWords"))??[],i=JSON.parse(localStorage.getItem("delWords"))??[];const q=10,S={value:1};function p(){console.log("renderList"),le(),h.innerHTML="";let e=(S.value-1)*q,t=e+q;for(let n=e;n<t;n++){const o=s[n];if(!o)return;const l=o.category||o.part||o.level||o.type,d=`
			<li 
				class="list-group-item ${o.check?"checked":""} ${Date.now()-o.id<=1*60*60*1e3?"new-word":""}"
				data-id="${o.id}"
				${l?`data-filter = "${(o.category+" "+o.part+" "+o.level+" "+o.type).trim()}"`:""}
			>
				<div class="d-flex justify-content-between align-items-center">
					<span class="">${n+1}</span>
					<div class="d-flex gap-3 align-items-center">
						<p class="word1-text">${o.isWord1Hidden?"üòä":o.word1}</p>
						<button class=" btn hide hide-word1" data-action="hide hide-word1"><i class="fas ${o.isWord1Hidden?"fa-eye":"fa-eye-slash"}"></i>${o.isWord1Hidden?"Show":"Hide"}</button>
						<button class="btn edit edit-word1" data-action="edit edit-word1"><i class="fas fa-pencil-alt"></i>Edit</button>
					</div>
					<div class="d-flex gap-3 align-items-center">
						<p class="word2-text">${o.isWord2Hidden?"üòä":o.word2}</p>
						<button class="btn hide hide-word2" data-action="hide hide-word2"><i class="fas ${o.isWord2Hidden?"fa-eye":"fa-eye-slash"}"></i>${o.isWord2Hidden?"Show":"Hide"}</button>
						<button class="btn edit edit-word2" data-action="edit edit-word2"><i class="fas fa-pencil-alt"></i>Edit</button>
					</div>
					<div>
						<i class="fas fa-star ${o.level==="easy"?"text-success":o.level==="medium"?"text-warning":o.level==="hard"?"text-danger":""}"></i>
						<i class="fas fa-star ${o.level==="medium"?"text-warning":o.level==="hard"?"text-danger":""}"></i>
						<i class="fas fa-star ${o.level==="hard"?"text-danger":""}"></i>
						<button class="btn btn-primary" data-action="check">–û—Ç–º–µ—Ç–∏—Ç—å</button>
						<button class="btn btn-danger" data-action="delete">–£–¥–∞–ª–∏—Ç—å</button>
					</div>
				</div>
				
				<div class="word-info">
				<button class="more-link">More...</button>
				</div>
			</li>
	`;h.insertAdjacentHTML("beforeend",d)}}const c={saveToLS:(e,t)=>localStorage.setItem(e,JSON.stringify(t)),sortWords:()=>s.sort((e,t)=>e.check-t.check),showEmptyList:()=>list.innerHTML=`
				<li id="emptyList" class="alert alert-info empty-list">
					<img src="./img/leaf.svg" alt="Empty" width="48" class="mt-3">
					<div class="empty-list__title">–°–ø–∏—Å–æ–∫ –¥–µ–ª –ø—É—Å—Ç</div>
				</li>
			`,showEmptyTrash:()=>emptyTrashList.style.display="block",clearCheckWords:e=>{localStorage.removeItem("checkWords")},updateDeletedWordCount:()=>z.textContent=i.length,updateWordCount:()=>_.textContent=s.length,updateRestoreBtn:()=>restoreBtn.disabled=!i.length,updateDelAllWordsBtn:()=>{R.disabled=!s.length},updateMarkUndoneBtn:()=>I.disabled=!s.length||!s.every(({check:e})=>e),updateDelDoneWordsBtn:()=>J.disabled=!s.length||!s.some(({check:e})=>e),updateToggleSelectAllBtn:()=>{console.log("updateToggleSelectAllBtn"),D.textContent=g.length?"–í–µ—Ä–Ω—É—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ":"–í—ã–¥–µ–ª–∏—Ç—å –≤—Å–µ",D.disabled=!s.length||s.every(({check:e})=>e)&&!g.length},generatePageNumbers:()=>{C.innerHTML="";for(let e=1;e<=Math.ceil(s.length/10);e++)C.innerHTML+=`<span ${S.value===1&&e===1?"class='selected'":""} data-page="${e}">${e}</span>`},showActiveNumberOfPage:()=>{C.querySelectorAll("span").forEach(t=>{t.dataset.page==S.value?t.classList.add("selected"):t.classList.remove("selected")})},updatePageControl:e=>V.style.display=e.length?"block":"none"},a=c.saveToLS,le=c.sortWords,w=c.showEmptyList,x=c.clearCheckWords,H=c.updateDeletedWordCount,L=c.updateWordCount,W=c.updateDelAllWordsBtn,y=c.updateMarkUndoneBtn,b=c.updateDelDoneWordsBtn,m=c.updateToggleSelectAllBtn,M=c.generatePageNumbers,U=c.showActiveNumberOfPage,k=c.updatePageControl,re=()=>{s.length?(p(),M()):(w(),k(s)),L(),H(),W(),y(),b(),m()};function de(e){e.preventDefault();const{target:t}=e,n=t.closest(".list-group-item"),o=+n.dataset.id,l=s.findIndex(({id:r})=>r===o),d=s[l];if(!(!n||!o||l===-1||!d))if(t.dataset.action==="delete")ae(n,d,l);else if(t.dataset.action==="check")ce(n,d);else if(t.matches(".edit"))ue(t,n,d);else if(t.matches(".hide"))ie(t,n,d);else if(t.matches(".more-link"))localStorage.setItem("selectedWord",JSON.stringify(o)),window.location.href="card.html";else return}function ae(e,t,n){n!==-1&&(s.splice(n,1),e.remove(),w(),L(s),a("words",s),p(),i.push(t),a("delWords",i),H(i)),g.length&&x(g),s.length?s.length===q&&M():(w(),k(s),m(),W())}function ce(e,t){e.classList.toggle("checked"),t.check=!t.check,g.length&&x(g),b(),y(),m(),p(),a("words",s)}function ie(e,t,n){if(e.matches(".hide-word1")){const o=t.querySelector(".word1-text"),l=t.querySelector("button.hide-word1");n.isWord1Hidden?(n.isWord1Hidden=!1,o.textContent=n.word1,l.innerHTML='<i class="fas fa-eye-slash"></i> Hide'):(n.isWord1Hidden=!0,o.textContent="üòä",l.innerHTML='<i class="fas fa-eye"></i> Show'),a("words",s)}if(e.matches(".hide-word2")){const o=t.querySelector(".word2-text"),l=t.querySelector("button.hide-word2");n.isWord2Hidden=!n.isWord2Hidden,n.isWord2Hidden?(o.textContent="üòä",l.innerHTML='<i class="fas fa-eye"></i> Show'):(o.textContent=n.word2,l.innerHTML='<i class="fas fa-eye-slash"></i> Hide'),a("words",s)}}function ue(e,t,n){const o=t.querySelector(".word1-text"),l=t.querySelector(".word2-text");if(e.matches(".edit-word1")){if(n.isWord1Hidden)return;o.contentEditable="true",o.focus();const r=document.createRange(),u=window.getSelection();r.selectNodeContents(o),r.collapse(!1),u.removeAllRanges(),u.addRange(r),o.addEventListener("keydown",f=>{f.keyCode===13&&(f.preventDefault(),o.blur())})}if(e.matches(".edit-word2")){if(n.isWord2Hidden)return;l.contentEditable="true",l.focus();const r=document.createRange(),u=window.getSelection();r.selectNodeContents(l),r.collapse(!1),u.removeAllRanges(),u.addRange(r),l.addEventListener("keydown",f=>{f.keyCode===13&&(f.preventDefault(),l.blur())})}function d(r,u,f,T){const B=s.find(j=>j.id==T),A=u.trim();A!==""&&(A!==B[f]&&(B[f]=A,a("words",s)),r.target.contentEditable="false")}o.addEventListener("blur",r=>{d(r,o.innerText,"word1",t.dataset.id)}),l.addEventListener("blur",r=>{d(r,l.innerText,"word2",t.dataset.id)})}function P(e){if(typeof e!="string")return!1;const t=parseFloat(e);return!isNaN(t)&&isFinite(t)}function N(e){const t=["!","@","#","$","%","^","&","*","(",")","_","+","-","=","[","]","{","}",";",":",",",".","/","<",">","?","|","\\"];for(let n=0;n<t.length;n++)if(e.indexOf(t[n])!==-1)return!0;return!1}const F=e=>(console.log({isFloat:P(e),hasSpecialCharacters:N(e),isNotEmpty:e.length<3,isExist:s.find(({word1:t})=>t.toLowerCase()===e.toLowerCase())}),{isFloat:P(e),hasSpecialCharacters:N(e),isNotEmpty:e.length<3,isExist:s.find(({word1:t})=>t.toLowerCase()===E.value.trim().toLowerCase())}),fe=(e,t)=>{const{target:n}=e;n.matches("#prev")&&t.value>1?--t.value:n.matches("#next")&&t.value<Math.ceil(s.length/10)&&++t.value,p(),U()},ge=(e,t)=>{const{target:n}=e;if(!n.hasAttribute("data-page"))return;const o=+n.dataset.page;t.value=o,p(),U()};function he(e,t){e.querySelectorAll(".list-group-item").forEach(o=>{o.querySelector(".word1-text").textContent.toLowerCase().includes(t.value.trim().toLowerCase())?o.classList.remove("d-none"):o.classList.add("d-none")})}function pe(){const{value:e}=Y,{value:t}=Z,{value:n}=ee,{value:o}=te,l=[e,t,n,o].filter(Boolean);h.querySelectorAll(".list-group-item").forEach(r=>{if(!l.length){r.classList.remove("d-none");return}const u=r.dataset.filter;if(!u){r.classList.add("d-none");return}const f=u.split(" ");l.every(T=>f.includes(T))?r.classList.remove("d-none"):r.classList.add("d-none")})}const me=(e,t)=>{t=[...e],console.log(t),a("checkWords",t);for(let n=0;n<e.length;n++)e[n].check=!0;h.querySelectorAll(".list-group-item").forEach(n=>n.classList.add("checked"))},ye=(e,t)=>{console.log(e),e.splice(0,e.length,...JSON.parse(localStorage.getItem("checkWords")??[])),console.log(e),p(),x(t)},ve=e=>{for(let t=0;t<e.length;t++)e[t].check=!1;console.log(e),h.querySelectorAll(".list-group-item").forEach(t=>t.classList.remove("checked")),y(),a("words",e),g.length&&x(g)},Se=()=>{s.every(({check:e})=>e)?(console.log("restore"),ye(s,g)):me(s,g),b(),y(),m(),console.log(s),a("words",s)},we=e=>{console.log(e),i.push(...e),e=[],console.log(e),h.innerHTML="",w(),a("words",e),a("delWords",i),m(),y(),W(),b(),L(e),H(i),k(e)},Le=e=>{e=e.filter(({check:t})=>!t),i.push(...e),a("delWords",i),e.length?p():w(),m(),y(),W(),b(),a("words",e),L(e),H(i),k(e)};function We(e){e.preventDefault();const t=E.value.trim();if(!F(t)||!F($.value.trim())){v.input.forEach(o=>o.classList.add("error")),v.reset(),E.focus();return}v.input.forEach(o=>o.classList.remove("error"));const n={id:Date.now(),word1:t,word2:$.value.trim(),isWord1Hidden:!1,isWord2Hidden:!1,check:!1,done:!1,category:K.value.trim(),part:G.value.trim(),level:Q.value.trim(),type:X.value.trim()};s.push(n),s.sort((o,l)=>o.word1.localeCompare(l.word1)),p(),a("words",s),v.reset(),E.focus(),L(s),s.length===1?(k(s),W(),m()):s.length===q+1&&M()}document.addEventListener("DOMContentLoaded",()=>re());v.addEventListener("submit",e=>We(e));h.addEventListener("click",de);O.addEventListener("input",()=>he(h,O));oe.addEventListener("input",pe);D.addEventListener("click",()=>Se());I.addEventListener("click",()=>ve(s));R.addEventListener("click",()=>we(s));J.addEventListener("click",()=>Le(s));V.addEventListener("click",e=>fe(e,S));C.addEventListener("click",e=>ge(e,S));se.addEventListener("click",()=>{ne.insertAdjacentHTML("beforeend","<input  placeholder='–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä'>")});
